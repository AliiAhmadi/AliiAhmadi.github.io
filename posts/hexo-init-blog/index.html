<!doctype html><html lang=en><head><meta charset=utf-8><meta content="width=device-width,initial-scale=1" name=viewport><title>hexo init blog</title><meta content="Ali Ahmadi" name=author><meta content="Hello World!" name=description><meta content=AliAhmadi2004.ir property=og:site_name><meta content=en-us property=og:locale><meta content=https://AliAhmadi2004.ir/posts/hexo-init-blog/ property=og:url><meta content="hexo init blog" property=og:title><meta content="Hello World!" property=og:description><meta content=article property=og:type><meta content="Ali Ahmadi" property=og:article:author><meta content=2015-04-24T01:57:13-08:00 property=og:article:published_time><meta content=Posts property=og:article:section><meta content=hacks property=og:article:tag><meta content=Hexo property=og:article:tag><meta content=blogging property=og:article:tag><link href=https://fonts.googleapis.com/ rel=dns-prefetch><link href=/site.css rel=stylesheet><link rel="shortcut icon" href=/favicon.svg type=image/svg+xml><link href=https://AliAhmadi2004.ir/posts/hexo-init-blog/ rel=canonical><body><div class=center><img alt=Me src=/self.jpg width=100></div><main><article id=content><header><h1>hexo init blog</h1><div class=post-meta><time datetime=2015-04-24T01:57:13-08:00>2015-04-24</time><span class=accent> ⬡ </span><a href=https://AliAhmadi2004.ir/tags/hacks/>#hacks</a>, <a href=https://AliAhmadi2004.ir/tags/hexo/>#Hexo</a>, <a href=https://AliAhmadi2004.ir/tags/blogging/>#blogging</a></div></header><p>I've been wanting to start a blog for a long time now. Today I'm pulling the trigger on that with a simple <code>hexo init blog</code>. Well, it wasn't <em>that</em> simple, so I feel like it's worth talking about a few of the complications I had.</p><span id=continue-reading></span><p><a href=https://hexo.io/>Hexo</a>, my chosen blogging framework, has made some interesting decisions. Running <code>tree -aACL 1</code> shows the directory structure for my new Hexo blog.<pre style=background:#282828;color:#fdf4c1aa><code><span>.
</span><span>├── _config.yml
</span><span>├── db.json
</span><span>├── .deploy_git
</span><span>├── .gitignore
</span><span>├── node_modules
</span><span>├── package.json
</span><span>├── public
</span><span>├── scaffolds
</span><span>├── source
</span><span>└── themes
</span><span>
</span><span>6 directories, 4 files
</span></code></pre><p>Hexo keeps its generated static files in the <code>public</code> directory. When deploying with git, as I choose to do, it uses the hidden <code>.deploy_git</code> directory to keep changes to <code>public</code> under version control. When generating static files Hexo obliterates anything in the <code>public</code> directory it doesn't know about. This means that even if the user wants to add some static files of their own they'll just be <a href="https://www.youtube.com/watch?v=07h0ksKx5sM">baleeted</a> when Hexo clears out the <code>.deploy_git</code> directory and copies the <code>public</code> directory in.<p>This isn't a big deal if you don't care about having any static files not generated by Hexo on your site. It just so happens that I'm very keen on having my <a href=https://tuckersiemens.com/keybase.txt>proof</a> for <a href=https://keybase.io>Keybase</a>. In order to prove ownership of a website Keybase requires that you keep a file called <code>keybase.txt</code> or <code>.well-known/keybase.txt</code> from the root of your site.<p>So, how do you serve a custom static file when your blogging framework is intent on keeping you from doing so? I suppose I could do the responsible thing and submit a pull request upstream for a configuration option to preserve certain files, but I'm much too lazy for that. Instead I've enlisted <a href=http://nginx.org/>nginx</a> for a band-aid solution.<pre style=background:#282828;color:#fdf4c1aa><code><span>location =/keybase.txt {
</span><span>    root /srv;
</span><span>}
</span></code></pre><p>Most requests to my site pass through nginx to my default root, but any requests for <code>keybase.txt</code> get served out of a separate directory where it safely sits.</article></main><footer><nav><a href=/>Home</a> ⬡ <a href=/posts>Posts</a> ⬡ <a href=/tags>Tags</a> ⬡ <a href=/contact>Contact</a></nav><p>© 2024 Ali Ahmadi ⬡ <a href=https://github.com/AliiAhmadi>Github</a></footer>